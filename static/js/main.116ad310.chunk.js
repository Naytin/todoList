(this.webpackJsonptodo=this.webpackJsonptodo||[]).push([[0],{128:function(t,e,n){},129:function(t,e,n){},161:function(t,e,n){"use strict";n.r(e);var a={};n.r(a),n.d(a,"loginTC",(function(){return St})),n.d(a,"logoutTC",(function(){return Lt}));var i={};n.r(i),n.d(i,"changeFilterAC",(function(){return at})),n.d(i,"fetchTodolistsTC",(function(){return Dt})),n.d(i,"addTodolistsTC",(function(){return Et})),n.d(i,"deleteTodolistsTC",(function(){return Nt})),n.d(i,"updateTodolistTitleTC",(function(){return Ft}));var o={};n.r(o),n.d(o,"fetchTasksTC",(function(){return Pt})),n.d(o,"removeTaskTC",(function(){return zt})),n.d(o,"addTaskTC",(function(){return Rt})),n.d(o,"updateTask",(function(){return _t}));var s={};n.r(s),n.d(s,"initializeAppTC",(function(){return Mt}));var d,c,r=n(2),l=n(0),u=n.n(l),f=n(9),j=n.n(f),b=(n(128),n(129),n(205)),p=n(206),O=n(207),h=n(208),m=n(198),C=n(163),g=n(201),x=n(209),y=n(210),v=n(110),k=n.n(v),I=n(17),T=n(202),w=n(162),A=n(47),S=n(211),L=n(199),D=u.a.memo((function(t){var e=t.addItem,n=t.disabled,a=void 0!==n&&n,i=Object(l.useState)(null),o=Object(A.a)(i,2),s=o[0],d=o[1],c=Object(l.useState)(""),u=Object(A.a)(c,2),f=u[0],j=u[1],b=function(){""!==f.trim()?(e(f.trim()),j("")):d("Title is required")};return Object(r.jsxs)("div",{children:[Object(r.jsx)(S.a,{value:f,disabled:a,onChange:function(t){j(t.currentTarget.value)},onKeyPress:function(t){null!==s&&d(null),"Enter"===t.key&&b()},error:!!s,label:f,helperText:s,variant:"outlined",className:""}),Object(r.jsx)(m.a,{size:"small",color:"primary",onClick:b,disabled:a,children:Object(r.jsx)(L.a,{})})]})})),E=n(200),N=u.a.memo((function(t){var e=t.value,n=t.onChange,a=t.disabled,i=void 0!==a&&a,o=u.a.useState(!1),s=Object(A.a)(o,2),d=s[0],c=s[1],f=Object(l.useState)(e),j=Object(A.a)(f,2),b=j[0],p=j[1];return d?Object(r.jsx)(S.a,{variant:"outlined",value:b,onChange:function(t){p(t.currentTarget.value)},onKeyPress:function(t){"Enter"===t.key&&(c(!1),n(b))},autoFocus:!0,onBlur:function(){c(!1),n(b)}}):Object(r.jsx)("span",{onDoubleClick:function(){i||(c(!0),p(e))},children:b})})),F=n(213),P=n(106),z=n.n(P).a.create({baseURL:"https://social-network.samuraijs.com/api/1.1/",withCredentials:!0,headers:{"API-KEY":"a409a2ec-60ad-4ff6-9051-8f6025edc2fd"}}),R=function(t){return z.get("todo-lists/".concat(t,"/tasks"))},_=function(t,e){return z.post("todo-lists/".concat(t,"/tasks"),{title:e})},M=function(t,e){return z.delete("todo-lists/".concat(e,"/tasks/").concat(t))},B=function(t,e,n){return z.put("todo-lists/".concat(t,"/tasks/").concat(e),n)},U=function(){return z.get("todo-lists")},q=function(t){return z.post("todo-lists",{title:t})},G=function(t){return z.delete("todo-lists/".concat(t))},H=function(t,e){return z.put("todo-lists/".concat(t),{title:e})},J=function(t){return z.post("auth/login",t)},K=function(){return z.delete("auth/login")},Z=function(){return z.get("auth/me")};!function(t){t[t.New=0]="New",t[t.InProgress=1]="InProgress",t[t.Completed=2]="Completed",t[t.Draft=3]="Draft"}(d||(d={})),function(t){t[t.Low=0]="Low",t[t.Middle=1]="Middle",t[t.Hi=2]="Hi",t[t.Urgently=3]="Urgently",t[t.Later=4]="Later"}(c||(c={}));var V=n(42),Y=n(15),$=n(29),Q=Object($.b)({name:"todolist",initialState:[],reducers:{setTodolistsAC:function(t,e){return e.payload.todos.map((function(t){return Object(Y.a)(Object(Y.a)({},t),{},{filter:"all",entityStatus:"idle"})}))},addTodolistAC:function(t,e){t.push(Object(Y.a)(Object(Y.a)({},e.payload.todo),{},{filter:"all",entityStatus:"idle"}))},removeTodolistAC:function(t,e){var n=t.findIndex((function(t){return t.id===e.payload.todolistID}));-1!==n&&t.splice(n,1)},changeFilterAC:function(t,e){var n=t.findIndex((function(t){return t.id===e.payload.id}));t[n].filter=e.payload.filter},changeTitleAC:function(t,e){var n=t.findIndex((function(t){return t.id===e.payload.id}));t[n].title=e.payload.title},changeTodolistEntityStatusAC:function(t,e){var n=t.findIndex((function(t){return t.id===e.payload.id}));t[n].entityStatus=e.payload.entityStatus}}}),W=Q.reducer,X=Q.actions,tt=X.setTodolistsAC,et=X.addTodolistAC,nt=X.removeTodolistAC,at=X.changeFilterAC,it=X.changeTitleAC,ot=X.changeTodolistEntityStatusAC,st={1:[{id:"1",title:"CSS",status:d.New,todoListId:"todolistId1",description:"",startDate:"",deadline:"",addedDate:"",order:0,priority:c.Low,entityStatus:"succeeded"},{id:"2",title:"JS",status:d.Completed,todoListId:"todolistId1",description:"",startDate:"",deadline:"",addedDate:"",order:0,priority:c.Low,entityStatus:"succeeded"},{id:"3",title:"REACT",status:d.New,todoListId:"todolistId1",description:"",startDate:"",deadline:"",addedDate:"",order:0,priority:c.Low,entityStatus:"succeeded"}],2:[{id:"1",title:"book",status:d.New,todoListId:"todolistId1",description:"",startDate:"",deadline:"",addedDate:"",order:0,priority:c.Low,entityStatus:"succeeded"},{id:"2",title:"book2",status:d.New,todoListId:"todolistId1",description:"",startDate:"",deadline:"",addedDate:"",order:0,priority:c.Low,entityStatus:"succeeded"},{id:"3",title:"book3",status:d.New,todoListId:"todolistId1",description:"",startDate:"",deadline:"",addedDate:"",order:0,priority:c.Low,entityStatus:"succeeded"}]},dt=Object($.b)({name:"tasks",initialState:st,reducers:{setTasksAC:function(t,e){t[e.payload.todolistId]=e.payload.tasks},addTaskAC:function(t,e){t[e.payload.todoListId].unshift(e.payload)},removeTaskAC:function(t,e){var n=t[e.payload.todolistId],a=n.findIndex((function(t){return t.id===e.payload.taskId}));a>-1&&n.splice(a,1)},updateTaskAC:function(t,e){var n=t[e.payload.todolistId],a=n.findIndex((function(t){return t.id===e.payload.taskId}));a>-1&&(n[a]=Object(Y.a)(Object(Y.a)({},n[a]),e.payload.model))},changeTaskEntityStatusAC:function(t,e){var n=t[e.payload.todolistId],a=n.findIndex((function(t){return t.id===e.payload.taskId}));a>-1&&(n[a].entityStatus=e.payload.entityStatus)}},extraReducers:function(t){t.addCase(et,(function(t,e){t[e.payload.todo.id]=[]})),t.addCase(nt,(function(t,e){delete t[e.payload.todolistID]})),t.addCase(tt,(function(t,e){e.payload.todos.forEach((function(e){t[e.id]=[]}))}))}}),ct=dt.reducer,rt=dt.actions,lt=rt.setTasksAC,ut=rt.addTaskAC,ft=rt.removeTaskAC,jt=rt.updateTaskAC,bt=rt.changeTaskEntityStatusAC,pt=n(49),Ot=Object($.b)({name:"app",initialState:{status:"idle",error:null,isInitialized:!1},reducers:{setAppStatusAC:function(t,e){t.status=e.payload.status},setAppErrorAC:function(t,e){t.error=e.payload.error},setIsInitialized:function(t,e){t.isInitialized=e.payload.value}}}),ht=Ot.reducer,mt=Ot.actions,Ct=mt.setAppStatusAC,gt=mt.setAppErrorAC,xt=mt.setIsInitialized,yt=Object($.b)({name:"auth",initialState:{isLoggedIn:!1},reducers:{setIsLoggedIn:function(t,e){t.isLoggedIn=e.payload.value}}}),vt=yt.reducer,kt=yt.actions.setIsLoggedIn,It=Object(V.b)({tasks:ct,todolists:W,app:ht,auth:vt}),Tt=Object($.a)({reducer:It,middleware:function(t){return t().prepend(pt.a)}});window.store=Tt;var wt=function(t,e){t.messages.length?e(gt({error:t.messages[0]})):e(gt({error:"Some error occurred"})),e(Ct({status:"failed"}))},At=function(t,e){e(gt({error:t.message})),e(Ct({status:"failed"}))},St=function(t){return function(e){e(Ct({status:"loading"})),J(t).then((function(t){0===t.data.resultCode?(e(Ct({status:"succeeded"})),e(kt({value:!0}))):wt(t.data,e)})).catch((function(t){At(t,e)}))}},Lt=function(){return function(t){t(Ct({status:"loading"})),K().then((function(e){0===e.data.resultCode?(t(Ct({status:"succeeded"})),t(kt({value:!1}))):wt(e.data,t)})).catch((function(e){At(e,t)}))}},Dt=function(){return function(t){t(Ct({status:"loading"})),U().then((function(e){t(tt({todos:e.data})),t(Ct({status:"succeeded"}))})).catch((function(e){At(e,t)}))}},Et=function(t){return function(e){try{e(Ct({status:"loading"})),q(t).then((function(t){0===t.data.resultCode?(e(et({todo:t.data.data.item})),e(Ct({status:"succeeded"}))):wt(t.data,e)})).catch((function(t){At(t,e)}))}catch(n){throw new Error(n)}}},Nt=function(t){return function(e){e(Ct({status:"loading"})),e(ot({id:t,entityStatus:"loading"})),G(t).then((function(n){if(0===n.data.resultCode){var a=nt({todolistID:t});e(a),e(Ct({status:"succeeded"}))}else wt(n.data,e)})).catch((function(t){At(t,e)}))}},Ft=function(t,e){return function(n){n(Ct({status:"loading"})),n(ot({id:t,entityStatus:"loading"})),H(t,e).then((function(a){if(0===a.data.resultCode){var i=it({id:t,title:e});n(i),n(Ct({status:"succeeded"})),n(ot({id:t,entityStatus:"succeeded"}))}else wt(a.data,n)})).catch((function(t){At(t,n)}))}},Pt=function(t){return function(e){e(Ct({status:"loading"})),R(t).then((function(n){var a=n.data.items,i=lt({tasks:a,todolistId:t});e(i),e(Ct({status:"succeeded"}))})).catch((function(t){At(t,e)}))}},zt=function(t,e){return function(n){n(Ct({status:"loading"})),n(bt({taskId:t,todolistId:e,entityStatus:"loading"})),M(t,e).then((function(a){if(0===a.data.resultCode){var i=ft({taskId:t,todolistId:e});n(i),n(Ct({status:"succeeded"}))}else wt(a.data,n)})).catch((function(t){At(t,n)}))}},Rt=function(t,e){return function(n){n(Ct({status:"loading"})),_(e,t).then((function(t){if(0===t.data.resultCode){var e=ut(t.data.data.item);n(e),n(Ct({status:"succeeded"}))}else wt(t.data,n)})).catch((function(t){At(t,n)}))}},_t=function(t,e,n){return function(a,i){var o=i().tasks[e].find((function(e){return e.id===t}));if(o){var s=Object(Y.a)({title:o.title,description:o.description,status:o.status,priority:o.priority,startDate:o.startDate,deadline:o.deadline},n);a(Ct({status:"loading"})),a(bt({taskId:t,todolistId:e,entityStatus:"loading"})),B(e,t,s).then((function(i){if(0===i.data.resultCode){var o=jt({taskId:t,model:n,todolistId:e});a(o),a(Ct({status:"succeeded"})),a(bt({taskId:t,todolistId:e,entityStatus:"succeeded"}))}else wt(i.data,a)})).catch((function(t){At(t,a)}))}else console.warn("task not found in the state")}},Mt=function(){return function(t){Z().then((function(e){0===e.data.resultCode?t(kt({value:!0})):wt(e.data,t),t(xt({value:!0}))})).catch((function(e){At(e,t)}))}},Bt=Object(Y.a)(Object(Y.a)(Object(Y.a)(Object(Y.a)({},a),i),o),s),Ut=function(){var t=Object(I.b)();return Object(l.useMemo)((function(){return Object(V.a)(Bt,t)}),[])},qt=u.a.memo((function(t){var e=t.todolistId,n=t.task,a=Ut(),i=a.removeTaskTC,o=a.updateTask,s=Object(l.useCallback)((function(){i(n.id,e)}),[n.id,e]),c=Object(l.useCallback)((function(t){var a=t.currentTarget.checked?d.Completed:d.New;o(n.id,e,{status:a})}),[n.id,e]),u=Object(l.useCallback)((function(t){o(n.id,e,{title:t})}),[n.id,e]),f="loading"===n.entityStatus;return Object(r.jsxs)("div",{className:n.status===d.Completed?"task__wrapper is-done":"task__wrapper",children:[Object(r.jsx)(F.a,{color:"primary",onChange:c,checked:n.status===d.Completed,disabled:f}),Object(r.jsx)(N,{value:n.title,onChange:u,disabled:f}),Object(r.jsx)(m.a,{onClick:s,disabled:f,children:Object(r.jsx)(E.a,{})})]})})),Gt=function(t){return t.auth.isLoggedIn},Ht=u.a.memo((function(t){var e=Object(I.c)(Gt),n=Ut(),a=n.fetchTasksTC,i=n.addTaskTC,o=n.updateTodolistTitleTC,s=n.deleteTodolistsTC,c=n.changeFilterAC;Object(l.useEffect)((function(){e&&a(t.todolistId)}),[]);var u=Object(l.useCallback)((function(e){i(e.trim(),t.todolistId)}),[]),f=Object(l.useCallback)((function(e){o(t.todolistId,e)}),[t.todolistId]),j=Object(l.useCallback)((function(t,e){c({filter:t,id:e})}),[]),b=Object(l.useCallback)((function(t){s(t)}),[]),p=Object(l.useCallback)((function(){j("all",t.todolistId)}),[]),O=Object(l.useCallback)((function(){j("active",t.todolistId)}),[]),h=Object(l.useCallback)((function(){j("completed",t.todolistId)}),[]),C=t.tasks,x=C;"active"===t.filter&&(x=C.filter((function(t){return t.status===d.New}))),"completed"===t.filter&&(x=C.filter((function(t){return t.status===d.Completed})));var y=x.map((function(e){return Object(r.jsx)(qt,{task:e,todolistId:t.todolistId},e.id)})),v="loading"===t.todolist.entityStatus;return Object(r.jsxs)("div",{children:[Object(r.jsxs)("div",{className:"title__wrapper",children:[Object(r.jsx)(N,{value:t.title,onChange:f,disabled:v}),Object(r.jsx)(m.a,{onClick:function(){return b(t.todolistId)},disabled:v,children:Object(r.jsx)(E.a,{})})]}),Object(r.jsx)(D,{addItem:u,disabled:v}),Object(r.jsx)("div",{children:y}),Object(r.jsxs)("div",{children:[Object(r.jsx)(g.a,{variant:"outlined",color:"all"===t.filter?"secondary":"primary",size:"small",onClick:p,children:"All"}),Object(r.jsx)(g.a,{variant:"outlined",color:"active"===t.filter?"secondary":"primary",size:"small",onClick:O,children:"Active"}),Object(r.jsx)(g.a,{variant:"outlined",color:"completed"===t.filter?"secondary":"primary",size:"small",onClick:h,children:"Completed"})]})]})})),Jt=n(14),Kt=function(t){return t.todolists},Zt=function(t){return t.tasks},Vt=function(){var t=Object(I.c)(Gt),e=Object(I.c)(Kt),n=Object(I.c)(Zt),a=Ut(),i=a.fetchTodolistsTC,o=a.addTodolistsTC;Object(l.useEffect)((function(){t&&i()}),[]);var s=Object(l.useCallback)((function(t){o(t)}),[]);return t?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)(T.a,{container:!0,style:{padding:"20px"},justify:"center",alignItems:"center",direction:"column",children:[Object(r.jsx)("div",{style:{marginRight:"20px"},children:"Add new task"}),Object(r.jsx)(D,{addItem:s})]}),Object(r.jsx)(T.a,{container:!0,spacing:3,justify:"space-around",children:e.map((function(t){var e=n[t.id];return Object(r.jsx)(T.a,{item:!0,style:{padding:"20px"},children:Object(r.jsx)(w.a,{style:{padding:"10px"},children:Object(r.jsx)(Ht,{todolist:t,title:t.title,tasks:e,filter:t.filter,todolistId:t.id},t.id)})},t.id)}))})]}):Object(r.jsx)(Jt.a,{to:"/login"})},Yt=n(216),$t=n(212);function Qt(t){return Object(r.jsx)($t.a,Object(Y.a)({elevation:6,variant:"filled"},t))}function Wt(){var t=Object(I.c)((function(t){return t.app.error})),e=Object(I.b)(),n=function(t,n){"clickaway"!==n&&e(gt({error:null}))};return Object(r.jsx)(Yt.a,{open:null!==t,autoHideDuration:4e3,onClose:n,children:Object(r.jsx)(Qt,{onClose:n,severity:"error",children:t})})}var Xt=n(53),te=n(196),ee=n(197),ne=n(203),ae=n(204),ie=n(111),oe=function(){var t=Object(I.c)(Gt),e=Ut().loginTC,n=Object(ie.a)({initialValues:{email:"free@samuraijs.com",password:"free",rememberMe:!1},validate:function(t){var e={};return t.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(t.email)||(e.email="Invalid email address"):e.email="Required",t.password?t.password.length<3&&(e.password="password must be more than 3 character"):e.password="Required",e},onSubmit:function(t){e(t),n.resetForm()}});return t?Object(r.jsx)(Jt.a,{to:"/"}):Object(r.jsx)(T.a,{container:!0,justify:"center",children:Object(r.jsx)(T.a,{item:!0,xs:10,children:Object(r.jsx)("form",{onSubmit:n.handleSubmit,style:{textAlign:"center",marginTop:"50px"},children:Object(r.jsxs)(te.a,{children:[Object(r.jsxs)(ee.a,{children:[Object(r.jsxs)("p",{children:["To log in get registered",Object(r.jsx)("a",{href:"https://social-network.samuraijs.com/",target:"_blank",children:"here"})]}),Object(r.jsx)("p",{children:"or use common test account credentials:"}),Object(r.jsx)("p",{children:"Email: free@samuraijs.com"}),Object(r.jsx)("p",{children:"Password: free"})]}),Object(r.jsxs)(ne.a,{children:[Object(r.jsx)(S.a,Object(Y.a)({label:"Email",margin:"normal"},n.getFieldProps("email"))),n.touched.email&&n.errors.email?Object(r.jsx)("div",{style:{color:"red"},children:n.errors.email}):null,Object(r.jsx)(S.a,Object(Y.a)({type:"password",label:"Password",margin:"normal"},n.getFieldProps("password"))),n.touched.password&&n.errors.password?Object(r.jsx)("div",{style:{color:"red"},children:n.errors.password}):null,Object(r.jsx)(ae.a,{label:"Remember me",control:Object(r.jsx)(F.a,Object(Y.a)({},n.getFieldProps("rememberMe")))}),Object(r.jsx)(g.a,{type:"submit",variant:"contained",color:"primary",children:"Login"})]})]})})})})},se=function(t){return t.app.isInitialized},de=function(t){return t.app.status},ce=Object(b.a)((function(t){return{root:{flexGrow:1},menuButton:{marginRight:t.spacing(2)},title:{flexGrow:1}}}));var re=function(){var t=ce(),e=Object(I.c)(Gt),n=Object(I.c)(se),a=Object(I.c)(de),i=Ut(),o=i.logoutTC,s=i.initializeAppTC,d=Object(Jt.g)(),c=Object(l.useCallback)((function(){o()}),[]);return Object(l.useEffect)((function(){s()}),[]),n?Object(r.jsxs)("div",{className:"App",children:[Object(r.jsx)(Wt,{}),Object(r.jsx)(O.a,{position:"static",children:Object(r.jsxs)(h.a,{children:[Object(r.jsx)(m.a,{edge:"start",className:t.menuButton,color:"inherit","aria-label":"menu",children:Object(r.jsx)(k.a,{})}),Object(r.jsx)(C.a,{variant:"h6",className:t.title,children:"My TODO"}),e?Object(r.jsx)(g.a,{color:"inherit",onClick:c,children:"Log out"}):Object(r.jsx)(g.a,{color:"inherit",onClick:function(){return d.push("/login")},children:"Login"})]})}),"loading"===a&&Object(r.jsx)(x.a,{color:"primary"}),Object(r.jsx)(y.a,{fixed:!0,children:Object(r.jsx)(Xt.a,{children:Object(r.jsxs)(Jt.d,{children:[Object(r.jsx)(Jt.b,{exact:!0,path:"/",render:function(){return Object(r.jsx)(Vt,{})}}),Object(r.jsx)(Jt.b,{path:"/login",render:function(){return Object(r.jsx)(oe,{})}}),Object(r.jsx)(Jt.b,{path:"/404",render:function(){return Object(r.jsx)("h1",{children:"404: PAGE NOT FOUND"})}}),Object(r.jsx)(Jt.a,{from:"*",to:"/404"})]})})})]}):Object(r.jsx)("div",{style:{position:"fixed",top:"30%",textAlign:"center",width:"100%"},children:Object(r.jsx)(p.a,{})})},le=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,217)).then((function(e){var n=e.getCLS,a=e.getFID,i=e.getFCP,o=e.getLCP,s=e.getTTFB;n(t),a(t),i(t),o(t),s(t)}))};j.a.render(Object(r.jsx)(I.a,{store:Tt,children:Object(r.jsx)(re,{})}),document.getElementById("root")),le()}},[[161,1,2]]]);
//# sourceMappingURL=main.116ad310.chunk.js.map