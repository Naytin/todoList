(this.webpackJsonptodo=this.webpackJsonptodo||[]).push([[0],{130:function(t,e,n){},131:function(t,e,n){},163:function(t,e,n){"use strict";n.r(e);var a={};n.r(a),n.d(a,"loginTC",(function(){return _t})),n.d(a,"logoutTC",(function(){return St}));var i={};n.r(i),n.d(i,"changeFilterAC",(function(){return at})),n.d(i,"fetchTodolistsTC",(function(){return Lt})),n.d(i,"addTodolistsTC",(function(){return Dt})),n.d(i,"deleteTodolistsTC",(function(){return Et})),n.d(i,"updateTodolistTitleTC",(function(){return Nt}));var o={};n.r(o),n.d(o,"fetchTasksTC",(function(){return Ft})),n.d(o,"removeTaskTC",(function(){return Pt})),n.d(o,"addTaskTC",(function(){return zt})),n.d(o,"updateTask",(function(){return Rt}));var s={};n.r(s),n.d(s,"initializeAppTC",(function(){return Mt}));var d,r,c=n(2),l=n(0),u=n.n(l),f=n(9),j=n.n(f),b=(n(130),n(131),n(207)),p=n(208),O=n(209),h=n(210),m=n(200),x=n(165),C=n(203),g=n(211),y=n(212),v=n(112),k=n.n(v),I=n(17),T=n(204),w=n(164),A=n(47),_=n(213),S=n(201),L=u.a.memo((function(t){var e=t.addItem,n=t.disabled,a=void 0!==n&&n,i=Object(l.useState)(null),o=Object(A.a)(i,2),s=o[0],d=o[1],r=Object(l.useState)(""),u=Object(A.a)(r,2),f=u[0],j=u[1],b=function(){""!==f.trim()?(e(f.trim()),j("")):d("Title is required")};return Object(c.jsxs)("div",{children:[Object(c.jsx)(_.a,{value:f,disabled:a,onChange:function(t){j(t.currentTarget.value)},onKeyPress:function(t){null!==s&&d(null),"Enter"===t.key&&b()},error:!!s,label:f,helperText:s,variant:"outlined",className:""}),Object(c.jsx)(m.a,{size:"small",color:"primary",onClick:b,disabled:a,children:Object(c.jsx)(S.a,{})})]})})),D=n(202),E=u.a.memo((function(t){var e=t.value,n=t.onChange,a=t.disabled,i=void 0!==a&&a,o=u.a.useState(!1),s=Object(A.a)(o,2),d=s[0],r=s[1],f=Object(l.useState)(e),j=Object(A.a)(f,2),b=j[0],p=j[1];return d?Object(c.jsx)(_.a,{variant:"outlined",value:b,onChange:function(t){p(t.currentTarget.value)},onKeyPress:function(t){"Enter"===t.key&&(r(!1),n(b))},autoFocus:!0,onBlur:function(){r(!1),n(b)}}):Object(c.jsx)("span",{onDoubleClick:function(){i||(r(!0),p(e))},children:b})})),N=n(215),F=n(108),P=n.n(F).a.create({baseURL:"https://social-network.samuraijs.com/api/1.1/",withCredentials:!0,headers:{"API-KEY":"a409a2ec-60ad-4ff6-9051-8f6025edc2fd"}}),z=function(t){return P.get("todo-lists/".concat(t,"/tasks"))},R=function(t,e){return P.post("todo-lists/".concat(t,"/tasks"),{title:e})},M=function(t,e){return P.delete("todo-lists/".concat(e,"/tasks/").concat(t))},B=function(t,e,n){return P.put("todo-lists/".concat(t,"/tasks/").concat(e),n)},U=function(){return P.get("todo-lists")},q=function(t){return P.post("todo-lists",{title:t})},G=function(t){return P.delete("todo-lists/".concat(t))},H=function(t,e){return P.put("todo-lists/".concat(t),{title:e})},J=function(t){return P.post("auth/login",t)},K=function(){return P.delete("auth/login")},V=function(){return P.get("auth/me")};!function(t){t[t.New=0]="New",t[t.InProgress=1]="InProgress",t[t.Completed=2]="Completed",t[t.Draft=3]="Draft"}(d||(d={})),function(t){t[t.Low=0]="Low",t[t.Middle=1]="Middle",t[t.Hi=2]="Hi",t[t.Urgently=3]="Urgently",t[t.Later=4]="Later"}(r||(r={}));var X=n(42),Y=n(15),Z=n(29),Q=Object(Z.b)({name:"todolist",initialState:[],reducers:{setTodolistsAC:function(t,e){return e.payload.todos.map((function(t){return Object(Y.a)(Object(Y.a)({},t),{},{filter:"all",entityStatus:"idle"})}))},addTodolistAC:function(t,e){t.push(Object(Y.a)(Object(Y.a)({},e.payload.todo),{},{filter:"all",entityStatus:"idle"}))},removeTodolistAC:function(t,e){var n=t.findIndex((function(t){return t.id===e.payload.todolistID}));-1!==n&&t.splice(n,1)},changeFilterAC:function(t,e){var n=t.findIndex((function(t){return t.id===e.payload.id}));t[n].filter=e.payload.filter},changeTitleAC:function(t,e){var n=t.findIndex((function(t){return t.id===e.payload.id}));t[n].title=e.payload.title},changeTodolistEntityStatusAC:function(t,e){var n=t.findIndex((function(t){return t.id===e.payload.id}));t[n].entityStatus=e.payload.entityStatus}}}),W=Q.reducer,$=Q.actions,tt=$.setTodolistsAC,et=$.addTodolistAC,nt=$.removeTodolistAC,at=$.changeFilterAC,it=$.changeTitleAC,ot=$.changeTodolistEntityStatusAC,st={1:[{id:"1",title:"CSS",status:d.New,todoListId:"todolistId1",description:"",startDate:"",deadline:"",addedDate:"",order:0,priority:r.Low,entityStatus:"succeeded"},{id:"2",title:"JS",status:d.Completed,todoListId:"todolistId1",description:"",startDate:"",deadline:"",addedDate:"",order:0,priority:r.Low,entityStatus:"succeeded"},{id:"3",title:"REACT",status:d.New,todoListId:"todolistId1",description:"",startDate:"",deadline:"",addedDate:"",order:0,priority:r.Low,entityStatus:"succeeded"}],2:[{id:"1",title:"book",status:d.New,todoListId:"todolistId1",description:"",startDate:"",deadline:"",addedDate:"",order:0,priority:r.Low,entityStatus:"succeeded"},{id:"2",title:"book2",status:d.New,todoListId:"todolistId1",description:"",startDate:"",deadline:"",addedDate:"",order:0,priority:r.Low,entityStatus:"succeeded"},{id:"3",title:"book3",status:d.New,todoListId:"todolistId1",description:"",startDate:"",deadline:"",addedDate:"",order:0,priority:r.Low,entityStatus:"succeeded"}]},dt=Object(Z.b)({name:"tasks",initialState:st,reducers:{setTasksAC:function(t,e){t[e.payload.todolistId]=e.payload.tasks},addTaskAC:function(t,e){t[e.payload.todoListId].unshift(e.payload)},removeTaskAC:function(t,e){var n=t[e.payload.todolistId],a=n.findIndex((function(t){return t.id===e.payload.taskId}));a>-1&&n.splice(a,1)},updateTaskAC:function(t,e){var n=t[e.payload.todolistId],a=n.findIndex((function(t){return t.id===e.payload.taskId}));a>-1&&(n[a]=Object(Y.a)(Object(Y.a)({},n[a]),e.payload.model))},changeTaskEntityStatusAC:function(t,e){var n=t[e.payload.todolistId],a=n.findIndex((function(t){return t.id===e.payload.taskId}));a>-1&&(n[a].entityStatus=e.payload.entityStatus)}},extraReducers:function(t){t.addCase(et,(function(t,e){t[e.payload.todo.id]=[]})),t.addCase(nt,(function(t,e){delete t[e.payload.todolistID]})),t.addCase(tt,(function(t,e){e.payload.todos.forEach((function(e){t[e.id]=[]}))}))}}),rt=dt.reducer,ct=dt.actions,lt=ct.setTasksAC,ut=ct.addTaskAC,ft=ct.removeTaskAC,jt=ct.updateTaskAC,bt=ct.changeTaskEntityStatusAC,pt=n(49),Ot=Object(Z.b)({name:"app",initialState:{status:"idle",error:null,isInitialized:!1},reducers:{setAppStatusAC:function(t,e){t.status=e.payload.status},setAppErrorAC:function(t,e){t.error=e.payload.error},setIsInitialized:function(t,e){t.isInitialized=e.payload.value}}}),ht=Ot.reducer,mt=Ot.actions,xt=mt.setAppStatusAC,Ct=mt.setAppErrorAC,gt=mt.setIsInitialized,yt=Object(Z.b)({name:"auth",initialState:{isLoggedIn:!1},reducers:{setIsLoggedIn:function(t,e){t.isLoggedIn=e.payload.value}}}),vt=yt.reducer,kt=yt.actions.setIsLoggedIn,It=Object(X.b)({tasks:rt,todolists:W,app:ht,auth:vt}),Tt=Object(Z.a)({reducer:It,middleware:function(t){return t().prepend(pt.a)}});window.store=Tt;var wt=function(t,e){t.messages.length?e(Ct({error:t.messages[0]})):e(Ct({error:"Some error occurred"})),e(xt({status:"failed"}))},At=function(t,e){e(Ct({error:t.message})),e(xt({status:"failed"}))},_t=function(t){return function(e){e(xt({status:"loading"})),J(t).then((function(t){0===t.data.resultCode?(e(xt({status:"succeeded"})),e(kt({value:!0}))):wt(t.data,e)})).catch((function(t){At(t,e)}))}},St=function(){return function(t){t(xt({status:"loading"})),K().then((function(e){0===e.data.resultCode?(t(xt({status:"succeeded"})),t(kt({value:!1}))):wt(e.data,t)})).catch((function(e){At(e,t)}))}},Lt=function(){return function(t){t(xt({status:"loading"})),U().then((function(e){t(tt({todos:e.data})),t(xt({status:"succeeded"}))})).catch((function(e){At(e,t)}))}},Dt=function(t){return function(e){try{e(xt({status:"loading"})),q(t).then((function(t){0===t.data.resultCode?(e(et({todo:t.data.data.item})),e(xt({status:"succeeded"}))):wt(t.data,e)})).catch((function(t){At(t,e)}))}catch(n){throw new Error(n)}}},Et=function(t){return function(e){e(xt({status:"loading"})),e(ot({id:t,entityStatus:"loading"})),G(t).then((function(n){if(0===n.data.resultCode){var a=nt({todolistID:t});e(a),e(xt({status:"succeeded"}))}else wt(n.data,e)})).catch((function(t){At(t,e)}))}},Nt=function(t,e){return function(n){n(xt({status:"loading"})),n(ot({id:t,entityStatus:"loading"})),H(t,e).then((function(a){if(0===a.data.resultCode){var i=it({id:t,title:e});n(i),n(xt({status:"succeeded"})),n(ot({id:t,entityStatus:"succeeded"}))}else wt(a.data,n)})).catch((function(t){At(t,n)}))}},Ft=function(t){return function(e){e(xt({status:"loading"})),z(t).then((function(n){var a=n.data.items,i=lt({tasks:a,todolistId:t});e(i),e(xt({status:"succeeded"}))})).catch((function(t){At(t,e)}))}},Pt=function(t,e){return function(n){n(xt({status:"loading"})),n(bt({taskId:t,todolistId:e,entityStatus:"loading"})),M(t,e).then((function(a){if(0===a.data.resultCode){var i=ft({taskId:t,todolistId:e});n(i),n(xt({status:"succeeded"}))}else wt(a.data,n)})).catch((function(t){At(t,n)}))}},zt=function(t,e){return function(n){n(xt({status:"loading"})),R(e,t).then((function(t){if(0===t.data.resultCode){var e=ut(t.data.data.item);n(e),n(xt({status:"succeeded"}))}else wt(t.data,n)})).catch((function(t){At(t,n)}))}},Rt=function(t,e,n){return function(a,i){var o=i().tasks[e].find((function(e){return e.id===t}));if(o){var s=Object(Y.a)({title:o.title,description:o.description,status:o.status,priority:o.priority,startDate:o.startDate,deadline:o.deadline},n);a(xt({status:"loading"})),a(bt({taskId:t,todolistId:e,entityStatus:"loading"})),B(e,t,s).then((function(i){if(0===i.data.resultCode){var o=jt({taskId:t,model:n,todolistId:e});a(o),a(xt({status:"succeeded"})),a(bt({taskId:t,todolistId:e,entityStatus:"succeeded"}))}else wt(i.data,a)})).catch((function(t){At(t,a)}))}else console.warn("task not found in the state")}},Mt=function(){return function(t){V().then((function(e){0===e.data.resultCode?t(kt({value:!0})):wt(e.data,t),t(gt({value:!0}))})).catch((function(e){At(e,t)}))}},Bt=Object(Y.a)(Object(Y.a)(Object(Y.a)(Object(Y.a)({},a),i),o),s),Ut=function(){var t=Object(I.b)();return Object(l.useMemo)((function(){return Object(X.a)(Bt,t)}),[])},qt=n(50),Gt=n.n(qt),Ht=u.a.memo((function(t){var e=t.todolistId,n=t.task,a=Ut(),i=a.removeTaskTC,o=a.updateTask,s=Object(l.useCallback)((function(){i(n.id,e)}),[n.id,e]),r=Object(l.useCallback)((function(t){o(n.id,e,{status:t.currentTarget.checked?d.Completed:d.New})}),[n.id,e]),u=Object(l.useCallback)((function(t){o(n.id,e,{title:t})}),[n.id,e]),f="loading"===n.entityStatus;return Object(c.jsxs)("div",{className:n.status===d.Completed?Gt.a.task__wrapper+" "+Gt.a.is_done:Gt.a.task__wrapper,children:[Object(c.jsxs)("div",{className:Gt.a.content,children:[Object(c.jsx)(N.a,{color:"primary",onChange:r,checked:n.status===d.Completed,disabled:f}),Object(c.jsx)(E,{value:n.title,onChange:u,disabled:f})]}),Object(c.jsx)(m.a,{onClick:s,disabled:f,children:Object(c.jsx)(D.a,{})})]})})),Jt=function(t){return t.auth.isLoggedIn},Kt=n(63),Vt=n.n(Kt),Xt=u.a.memo((function(t){var e=Object(I.c)(Jt),n=Ut(),a=n.fetchTasksTC,i=n.addTaskTC,o=n.updateTodolistTitleTC,s=n.deleteTodolistsTC,r=n.changeFilterAC;Object(l.useEffect)((function(){e&&a(t.todolistId)}),[]);var u=Object(l.useCallback)((function(e){i(e.trim(),t.todolistId)}),[]),f=Object(l.useCallback)((function(e){o(t.todolistId,e)}),[t.todolistId]),j=Object(l.useCallback)((function(t,e){r({filter:t,id:e})}),[]),b=Object(l.useCallback)((function(t){s(t)}),[]),p=Object(l.useCallback)((function(){j("all",t.todolistId)}),[]),O=Object(l.useCallback)((function(){j("active",t.todolistId)}),[]),h=Object(l.useCallback)((function(){j("completed",t.todolistId)}),[]),x=t.tasks,g=x;"active"===t.filter&&(g=x.filter((function(t){return t.status===d.New}))),"completed"===t.filter&&(g=x.filter((function(t){return t.status===d.Completed})));var y=g.map((function(e){return Object(c.jsx)(Ht,{task:e,todolistId:t.todolistId},e.id)})),v="loading"===t.todolist.entityStatus;return Object(c.jsxs)("div",{className:Vt.a.todo,children:[Object(c.jsxs)("div",{className:Vt.a.title__wrapper,children:[Object(c.jsx)(E,{value:t.title,onChange:f,disabled:v}),Object(c.jsx)(m.a,{onClick:function(){return b(t.todolistId)},disabled:v,children:Object(c.jsx)(D.a,{})})]}),Object(c.jsx)(L,{addItem:u,disabled:v}),Object(c.jsx)("div",{children:y}),Object(c.jsxs)("div",{className:Vt.a.btn__wrapper,children:[Object(c.jsx)(C.a,{variant:"outlined",color:"all"===t.filter?"secondary":"primary",size:"small",onClick:p,children:"All"}),Object(c.jsx)(C.a,{variant:"outlined",color:"active"===t.filter?"secondary":"primary",size:"small",onClick:O,children:"Active"}),Object(c.jsx)(C.a,{variant:"outlined",color:"completed"===t.filter?"secondary":"primary",size:"small",onClick:h,children:"Completed"})]})]})})),Yt=n(14),Zt=function(t){return t.todolists},Qt=function(t){return t.tasks},Wt=function(){var t=Object(I.c)(Jt),e=Object(I.c)(Zt),n=Object(I.c)(Qt),a=Ut(),i=a.fetchTodolistsTC,o=a.addTodolistsTC;return Object(l.useEffect)((function(){t&&i()}),[]),t?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)(T.a,{container:!0,style:{padding:"20px"},justify:"center",alignItems:"center",direction:"column",children:[Object(c.jsx)("div",{style:{marginRight:"20px"},children:"Add new task"}),Object(c.jsx)(L,{addItem:o})]}),Object(c.jsx)(T.a,{container:!0,wrap:"nowrap",style:{overflowY:"auto",padding:"0  20px 300px"},children:e.map((function(t){var e=n[t.id];return Object(c.jsx)(T.a,{item:!0,style:{padding:"20px"},children:Object(c.jsx)(w.a,{style:{padding:"10px"},children:Object(c.jsx)(Xt,{todolist:t,title:t.title,tasks:e,filter:t.filter,todolistId:t.id},t.id)})},t.id)}))})]}):Object(c.jsx)(Yt.a,{to:"/login"})},$t=n(218),te=n(214);function ee(t){return Object(c.jsx)(te.a,Object(Y.a)({elevation:6,variant:"filled"},t))}function ne(){var t=Object(I.c)((function(t){return t.app.error})),e=Object(I.b)(),n=function(t,n){"clickaway"!==n&&e(Ct({error:null}))};return Object(c.jsx)($t.a,{open:null!==t,autoHideDuration:4e3,onClose:n,children:Object(c.jsx)(ee,{onClose:n,severity:"error",children:t})})}var ae=n(54),ie=n(198),oe=n(199),se=n(205),de=n(206),re=n(113),ce=function(){var t=Object(I.c)(Jt),e=Ut().loginTC,n=Object(re.a)({initialValues:{email:"free@samuraijs.com",password:"free",rememberMe:!1},validate:function(t){var e={};return t.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(t.email)||(e.email="Invalid email address"):e.email="Required",t.password?t.password.length<3&&(e.password="password must be more than 3 character"):e.password="Required",e},onSubmit:function(t){e(t),n.resetForm()}});return t?Object(c.jsx)(Yt.a,{to:"/"}):Object(c.jsx)(T.a,{container:!0,justify:"center",children:Object(c.jsx)(T.a,{item:!0,xs:10,children:Object(c.jsx)("form",{onSubmit:n.handleSubmit,style:{textAlign:"center",marginTop:"50px"},children:Object(c.jsxs)(ie.a,{children:[Object(c.jsxs)(oe.a,{children:[Object(c.jsxs)("p",{children:["To log in get registered",Object(c.jsx)("a",{href:"https://social-network.samuraijs.com/",target:"_blank",children:"here"})]}),Object(c.jsx)("p",{children:"or use common test account credentials:"}),Object(c.jsx)("p",{children:"Email: free@samuraijs.com"}),Object(c.jsx)("p",{children:"Password: free"})]}),Object(c.jsxs)(se.a,{children:[Object(c.jsx)(_.a,Object(Y.a)({label:"Email",margin:"normal"},n.getFieldProps("email"))),n.touched.email&&n.errors.email?Object(c.jsx)("div",{style:{color:"red"},children:n.errors.email}):null,Object(c.jsx)(_.a,Object(Y.a)({type:"password",label:"Password",margin:"normal"},n.getFieldProps("password"))),n.touched.password&&n.errors.password?Object(c.jsx)("div",{style:{color:"red"},children:n.errors.password}):null,Object(c.jsx)(de.a,{label:"Remember me",control:Object(c.jsx)(N.a,Object(Y.a)({},n.getFieldProps("rememberMe")))}),Object(c.jsx)(C.a,{type:"submit",variant:"contained",color:"primary",children:"Login"})]})]})})})})},le=function(t){return t.app.isInitialized},ue=function(t){return t.app.status},fe=Object(b.a)((function(t){return{root:{flexGrow:1},menuButton:{marginRight:t.spacing(2)},title:{flexGrow:1}}}));var je=function(){var t=fe(),e=Object(I.c)(Jt),n=Object(I.c)(le),a=Object(I.c)(ue),i=Ut(),o=i.logoutTC,s=i.initializeAppTC,d=Object(Yt.g)(),r=Object(l.useCallback)((function(){o()}),[]);return Object(l.useEffect)((function(){s()}),[]),n?Object(c.jsxs)("div",{className:"App",children:[Object(c.jsx)(ne,{}),Object(c.jsx)(O.a,{position:"static",children:Object(c.jsxs)(h.a,{children:[Object(c.jsx)(m.a,{edge:"start",className:t.menuButton,color:"inherit","aria-label":"menu",children:Object(c.jsx)(k.a,{})}),Object(c.jsx)(x.a,{variant:"h6",className:t.title,children:"My TODO"}),e?Object(c.jsx)(C.a,{color:"inherit",onClick:r,children:"Log out"}):Object(c.jsx)(C.a,{color:"inherit",onClick:function(){return d.push("/login")},children:"Login"})]})}),"loading"===a&&Object(c.jsx)(g.a,{color:"primary"}),Object(c.jsx)(y.a,{maxWidth:!1,children:Object(c.jsx)(ae.a,{children:Object(c.jsxs)(Yt.d,{children:[Object(c.jsx)(Yt.b,{exact:!0,path:"/",render:function(){return Object(c.jsx)(Wt,{})}}),Object(c.jsx)(Yt.b,{path:"/login",render:function(){return Object(c.jsx)(ce,{})}}),Object(c.jsx)(Yt.b,{path:"/404",render:function(){return Object(c.jsx)("h1",{children:"404: PAGE NOT FOUND"})}}),Object(c.jsx)(Yt.a,{from:"*",to:"/404"})]})})})]}):Object(c.jsx)("div",{style:{position:"fixed",top:"30%",textAlign:"center",width:"100%"},children:Object(c.jsx)(p.a,{})})},be=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,219)).then((function(e){var n=e.getCLS,a=e.getFID,i=e.getFCP,o=e.getLCP,s=e.getTTFB;n(t),a(t),i(t),o(t),s(t)}))};j.a.render(Object(c.jsx)(I.a,{store:Tt,children:Object(c.jsx)(je,{})}),document.getElementById("root")),be()},50:function(t,e,n){t.exports={is_done:"Task_is_done__j8oYL",task__wrapper:"Task_task__wrapper__3yx0w",content:"Task_content__2Dl_X"}},63:function(t,e,n){t.exports={todo:"TodoList_todo__3km2V",btn__wrapper:"TodoList_btn__wrapper__3Xdyv",title__wrapper:"TodoList_title__wrapper__2EXQV"}}},[[163,1,2]]]);
//# sourceMappingURL=main.88a70d2c.chunk.js.map